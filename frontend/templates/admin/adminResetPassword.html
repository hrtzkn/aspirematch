<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN LOGIN</title>
    <link href="/static/css/output.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/output.css') }}" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex flex-col min-h-screen bg-[#f6ebcd]">
     <header class="bg-[#166D3B] h-24 w-full fixed top-0 shadow-md z-50">
    <div class="max-w-7xl mx-auto h-full px-6 flex items-center justify-center">
        <img src="/static/images/aspire.png" alt="AspireMatch Logo" class="max-h-24 w-auto">
      <h1 class="text-[#f6ebcd] text-3xl font-semibold tracking-wide text-center">
        ASPIREMATCH: <span class="font-light">A Career Interest Recommendation Application</span>
      </h1>
    </div>
  </header>

    <div class="grow flex flex-col mt-10 justify-center items-center">
        <div class="bg-white p-10 rounded-lg shadow-lg w-150 flex flex-col items-center">
<form method="POST" class="max-w-md mx-auto bg-white p-6 rounded-lg shadow">
    <h2 class="text-xl font-bold text-center mb-4">
        Set New Password
    </h2>

    {% if error %}
    <p class="text-red-600 text-center mb-3">{{ error }}</p>
    {% endif %}

    <!-- PASSWORD -->
    <div class="mb-4">
        <label class="block text-black mb-1">New Password</label>

        <div class="flex gap-2 items-center flex-wrap">
            <input id="adminPassword"
                   type="password"
                   name="password"
                   required
                   class="flex-1 p-2 border border-[#166D3B] bg-white rounded-lg"
                   onkeyup="checkPasswordStrength()">

            <button type="button"
                    onclick="togglePassword(this)"
                    class="bg-yellow-500 text-white px-3 py-2 rounded-lg hover:bg-yellow-700 text-sm">
                Show
            </button>

            <button type="button"
                    onclick="copyPassword(this)"
                    class="bg-gray-500 text-white px-3 py-2 rounded-lg hover:bg-gray-600 text-sm">
                Copy
            </button>

            <button type="button"
                    onclick="generateStrongPassword()"
                    class="bg-[#166D3B] text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm">
                Suggest AI Password
            </button>
        </div>

        <!-- Strength Bar -->
        <div class="w-full h-2 bg-gray-300 rounded mt-2">
            <div id="strengthBar" class="h-full w-0 rounded transition-all"></div>
        </div>

        <p id="passwordStrengthMsg" class="text-xs text-gray-600 mt-1"></p>

        <!-- Requirements -->
        <p class="text-xs mt-2 text-gray-700">
            Password must include:
            <span id="reqUpper" class="text-red-600">❌ A-Z</span>,
            <span id="reqLower" class="text-red-600">❌ a-z</span>,
            <span id="reqNumber" class="text-red-600">❌ 0-9</span>,
            <span id="reqSymbol" class="text-red-600">❌ symbol</span>,
            <span id="reqLength" class="text-red-600">❌ 8 characters</span>
        </p>
    </div>

    <!-- CONFIRM PASSWORD -->
    <div class="mb-4">
        <label class="block text-black mb-1">Confirm Password</label>
        <input type="password"
               name="confirm"
               required
               class="w-full p-2 border border-[#166D3B] bg-white rounded-lg">
    </div>

    <button class="bg-[#166D3B] text-white w-full p-2 rounded hover:bg-green-700">
        Update Password
    </button>
</form>

        </div>
    </div>

<script>
function generateStrongPassword() {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_-+=<>?";
    let password = "";

    for (let i = 0; i < 16; i++) {
        password += chars.charAt(Math.floor(Math.random() * chars.length));
    }

    const pwField = document.getElementById("adminPassword");
    pwField.value = password;
    checkPasswordStrength();
}

function togglePassword(btn) {
    const pw = document.getElementById("adminPassword");

    if (pw.type === "password") {
        pw.type = "text";
        btn.innerText = "Hide";
    } else {
        pw.type = "password";
        btn.innerText = "Show";
    }
}

function copyPassword(btn) {
    const pw = document.getElementById("adminPassword");
    pw.select();
    pw.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(pw.value);

    btn.innerText = "✔ Copied";
    btn.classList.add("bg-green-600");

    setTimeout(() => {
        btn.innerText = "Copy";
        btn.classList.remove("bg-green-600");
    }, 2000);
}

function checkPasswordStrength() {
    const pw = document.getElementById("adminPassword").value;
    const bar = document.getElementById("strengthBar");
    const msg = document.getElementById("passwordStrengthMsg");

    let strength = 0;

    const hasUpper = /[A-Z]/.test(pw);
    const hasLower = /[a-z]/.test(pw);
    const hasNumber = /[0-9]/.test(pw);
    const hasSymbol = /[^A-Za-z0-9]/.test(pw);
    const hasLength = pw.length >= 8;

    updateReq("reqUpper", hasUpper, "A-Z");
    updateReq("reqLower", hasLower, "a-z");
    updateReq("reqNumber", hasNumber, "0-9");
    updateReq("reqSymbol", hasSymbol, "symbol");
    updateReq("reqLength", hasLength, "8 characters");

    function updateReq(id, valid, label) {
        const el = document.getElementById(id);
        el.className = valid ? "text-green-600" : "text-red-600";
        el.innerHTML = (valid ? "✔ " : "❌ ") + label;
    }

    if (hasUpper) strength++;
    if (hasLower) strength++;
    if (hasNumber) strength++;
    if (hasSymbol) strength++;
    if (hasLength) strength++;

    if (strength <= 2) {
        bar.style.width = "25%";
        bar.style.background = "red";
        msg.innerText = "Weak password";
    } else if (strength <= 4) {
        bar.style.width = "60%";
        bar.style.background = "orange";
        msg.innerText = "Medium strength";
    } else {
        bar.style.width = "100%";
        bar.style.background = "green";
        msg.innerText = "Strong password";
    }
}
</script>
    {% include 'components/footer.html' %}

</body>
</html>